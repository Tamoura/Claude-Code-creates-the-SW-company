# Task List: Mu'aththir — Core Features

**Product**: muaththir
**Plan**: docs/plan.md
**Created**: 2026-02-07
**Status**: In Progress
**Generated by**: Orchestrator

## Task Summary

| Phase | Tasks | Tests | Impl | Status |
|-------|-------|-------|------|--------|
| Phase 1: Foundation | 7 | 2 | 5 | Complete |
| Phase 2: Observations + Dashboard | 7 | 2 | 5 | Complete |
| Phase 3: Milestones + Intelligence | 8 | 2 | 6 | Complete |
| Phase 4: Mobile App | 5 | — | 5 | In Progress |
| Phase 5: Quality Gates | 4 | — | — | Pending |
| **Total** | **31** | **6** | **21** | **In Progress** |

## Phase 1: Foundation

- [x] **T001** `test` Write auth + family user tests (login, multi-user, role enforcement) — FR-007
- [x] **T002** `feat` Fastify API scaffold (port 5004, TypeScript strict, Prisma) — Foundation
- [x] **T003** `feat` Prisma schema: Family, User, Child, Observation, ObservationPhoto, Milestone, Insight — FR-001, FR-002, FR-005, FR-006
- [x] **T004** `feat` Install @connectsw/auth plugin with family-scoped role system — FR-007
- [x] **T005** `feat` Family CRUD (create, update, get members) — FR-007
- [x] **T006** `feat` Child CRUD (create, update, archive) scoped to family — FR-001
- [x] **T007** `test` Verify auth + family tests pass — FR-007

## Phase 2: Observations + Dashboard

- [x] **T010** `test` Write observation creation and dashboard rendering tests — FR-002, FR-004
- [x] **T011** `feat` Observation CRUD API (POST/GET/DELETE) with 6-dimension enum — FR-002
- [x] **T012** `feat` Photo upload endpoint + S3 signed URL generation — FR-003
- [x] **T013** `feat` Next.js dashboard scaffold (port 3104, App Router, Tailwind) — Foundation
- [x] **T014** `feat` Observation recording form (dimension picker, notes, photo) — FR-002
- [x] **T015** `feat` Radar chart dashboard (Recharts, 6 dimensions, time filter) — FR-004
- [x] **T016** `test` Verify all observation + dashboard tests pass — FR-002, FR-004

## Phase 3: Milestones + Intelligence

- [x] **T020** `test` Write milestone tracking and AI insights tests — FR-005, FR-006
- [x] **T021** `feat` Milestone CRUD API (POST/GET/PUT/DELETE) with target date and completion — FR-005
- [x] **T022** `feat` Claude API insight generation service with structured prompt — FR-006
- [x] **T023** `feat` BullMQ insight queue (debounced 1h, retry on rate limit) — FR-006
- [x] **T024** `feat` Email notifications via @connectsw/notifications (milestone alerts) — FR-010
- [x] **T025** `feat` Milestone UI (list, progress bar, overdue flags, celebration modal) — FR-005
- [x] **T026** `feat` Insights display UI (narrative text, linked observations) — FR-006
- [x] **T027** `test` Verify milestone + insights tests pass — FR-005, FR-006

## Phase 4: Mobile App

- [ ] **T030** `feat` Expo mobile app scaffold (Expo Router, expo-secure-store) — FR-009
- [ ] **T031** `feat` Mobile auth with SecureStore token management — FR-009
- [ ] **T032** `feat` Mobile observation recording screen (camera integration) — FR-002
- [ ] **T033** `feat` Mobile dashboard with react-native-svg radar chart — FR-004
- [ ] **T034** `feat` Mobile milestone list with swipe-to-complete — FR-005

## Phase 5: Quality Gates

- [ ] **T040** `ci` Spec consistency gate — /speckit.analyze
- [ ] **T041** `ci` Security gate — npm audit + secret scan
- [ ] **T042** `ci` Performance gate — Lighthouse web + bundle size
- [ ] **T043** `ci` E2E tests — Playwright (web) + Detox (mobile)

## Traceability Matrix

| FR | Requirement | Task(s) | Test(s) |
|----|-------------|---------|---------|
| FR-001 | Child profile management | T006 | T001 |
| FR-002 | Observation recording | T011, T014 | T010 |
| FR-003 | Photo upload | T012 | T010 |
| FR-004 | Development dashboard | T015, T033 | T010 |
| FR-005 | Milestone tracking | T021, T025, T034 | T020 |
| FR-006 | AI insights | T022, T023, T026 | T020 |
| FR-007 | Family multi-user | T004, T005 | T001 |
| FR-008 | Billing integration | Not yet planned | — |
| FR-009 | Mobile app | T030-T034 | — |
| FR-010 | Email notifications | T024 | T020 |
