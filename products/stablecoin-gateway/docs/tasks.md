# Task List: Stablecoin Gateway — Core Features

**Product**: stablecoin-gateway
**Plan**: docs/plan.md
**Created**: 2026-01-28
**Status**: Complete
**Generated by**: Orchestrator

## Task Summary

| Phase | Tasks | Tests | Impl | Status |
|-------|-------|-------|------|--------|
| Phase 1: Foundation | 6 | 2 | 4 | Complete |
| Phase 2: Core Payment API | 6 | 2 | 4 | Complete |
| Phase 3: Webhooks | 5 | 2 | 3 | Complete |
| Phase 4: Dashboard | 8 | 2 | 6 | Complete |
| Phase 5: Quality Gates | 5 | — | — | Complete |
| **Total** | **30** | **8** | **17** | **Complete** |

## Phase 1: Foundation

- [x] **T001** `test` Write auth integration tests (JWT login, API key auth, role check) — FR-004
- [x] **T002** `feat` Fastify API scaffold with TypeScript strict, ESLint, tsconfig — Foundation
- [x] **T003** `feat` Prisma schema: User, ApiKey, Transaction, WebhookEndpoint, AuditLog with indexes — FR-001, FR-005, FR-008
- [x] **T004** `feat` Install and configure @connectsw/auth plugin (from packages/auth) — FR-004
- [x] **T005** `feat` Redis plugin from @connectsw/shared with graceful fallback — NFR-003
- [x] **T006** `test` Verify all auth tests pass (T001 green) — FR-004

## Phase 2: Core Payment API

- [x] **T010** `test` Write payment session tests (create, status, expiry, blockchain confirm) — FR-001, FR-002
- [x] **T011** `feat` POST /api/v1/payments endpoint (create session, allocate wallet address) — FR-001
- [x] **T012** `feat` Circle API integration service (request deposit address, verify settlement) — FR-001
- [x] **T013** `feat` Alchemy blockchain monitoring service (watch for confirmations, update status) — FR-002
- [x] **T014** `feat` Payment status state machine (pending → confirming → completed/expired/failed) — FR-002
- [x] **T015** `test` Verify all payment tests pass (T010 green) — FR-001, FR-002

## Phase 3: Webhooks

- [x] **T020** `test` Write webhook delivery tests (delivery, retry, signature verification) — FR-003, FR-010
- [x] **T021** `feat` Webhook endpoint CRUD (POST/GET/DELETE /api/v1/webhooks) — FR-010
- [x] **T022** `feat` BullMQ delivery queue: schedule, exponential backoff retry (5 attempts) — FR-003
- [x] **T023** `feat` HMAC-SHA256 signature generation and verification in delivery worker — FR-003
- [x] **T024** `test` Verify all webhook tests pass (T020 green) — FR-003

## Phase 4: Dashboard (Frontend)

- [x] **T030** `test` Write React component tests (transaction list, analytics, API key UI) — FR-007, FR-009
- [x] **T031** `feat` Next.js 14 dashboard scaffold (port 3101, App Router, Tailwind) — Foundation
- [x] **T032** `feat` Auth pages: login, register with JWT handling — FR-004
- [x] **T033** `feat` Transaction list with date/status filter and pagination — FR-007
- [x] **T034** `feat` Analytics charts: 30-day volume, success rate, revenue (Recharts) — FR-007
- [x] **T035** `feat` API key management: create (show once), list, revoke — FR-005
- [x] **T036** `feat` CSV export of filtered transactions — FR-009
- [x] **T037** `test` Verify all dashboard tests pass (T030 green) — FR-007, FR-009

## Phase 5: Quality Gates

- [x] **T040** `ci` Spec consistency gate — /speckit.analyze → PASS
- [x] **T041** `ci` Security gate — npm audit + secret scan → PASS
- [x] **T042** `ci` Performance gate — Lighthouse 94, bundle 340KB → PASS
- [x] **T043** `ci` E2E tests — Playwright 12 scenarios → PASS
- [x] **T044** `docs` Testing gate report → docs/TESTING-GATE-REPORT.md

## Traceability Matrix

| FR | Requirement | Task(s) | Test(s) |
|----|-------------|---------|---------|
| FR-001 | Create payment session | T011, T012 | T010 |
| FR-002 | Blockchain monitoring | T013, T014 | T010 |
| FR-003 | Webhook delivery + signature | T022, T023 | T020 |
| FR-004 | Merchant auth | T004 | T001 |
| FR-005 | API key management | T035 | T030 |
| FR-006 | Rate limiting | T005 | T001 |
| FR-007 | Transaction dashboard | T033, T034 | T030 |
| FR-008 | Audit logging | T003 | T001 |
| FR-009 | CSV export | T036 | T030 |
| FR-010 | Webhook CRUD | T021 | T020 |
