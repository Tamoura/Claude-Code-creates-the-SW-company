# Stablecoin Gateway - Environment Variables Template
#
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Generate secure values for all REQUIRED secrets (marked with [REQUIRED])
# 3. Never commit .env to version control (it's in .gitignore)
#
# For Docker Compose usage:
#   docker-compose up -d
#
# For local development:
#   npm run dev

# ===================================
# API Configuration
# ===================================
PORT=5001
NODE_ENV=development

# ===================================
# Database (PostgreSQL) [REQUIRED]
# ===================================
# For Docker Compose - set these variables:
POSTGRES_USER=postgres
# [REQUIRED] Generate with: openssl rand -base64 24
POSTGRES_PASSWORD=CHANGE_ME_generate_secure_password
POSTGRES_DB=stablecoin_gateway_dev

# For local development - full connection string:
DATABASE_URL="postgresql://postgres:CHANGE_ME@localhost:5432/stablecoin_gateway_dev"

# ===================================
# Redis (Cache & Job Queue)
# ===================================
REDIS_URL="redis://localhost:6379"

# TLS/SSL Configuration (for cloud Redis like AWS ElastiCache, Redis Cloud, etc.)
# Set to 'true' to enable encrypted connections
REDIS_TLS="false"

# Certificate validation (set to 'false' for self-signed certs in staging)
# Only relevant when REDIS_TLS=true
REDIS_TLS_REJECT_UNAUTHORIZED="true"

# Password authentication (if not included in REDIS_URL)
# For cloud Redis providers, the password is often required
# REDIS_PASSWORD=""

# ===================================
# Authentication [REQUIRED]
# ===================================
# [REQUIRED] Generate with: openssl rand -hex 32
# Minimum 64 characters for production security
# NEVER use default values in production!
JWT_SECRET=CHANGE_ME_generate_with_openssl_rand_hex_32
JWT_EXPIRES_IN="15m"
REFRESH_TOKEN_EXPIRES_IN="7d"

# ===================================
# Internal API Key [REQUIRED in production]
# ===================================
# Used to secure the /internal/metrics endpoint
# [REQUIRED] Generate with: openssl rand -hex 32
# Without this, /internal/metrics returns 500 in production
# In development, the endpoint is accessible without auth if not set
INTERNAL_API_KEY=CHANGE_ME_generate_with_openssl_rand_hex_32

# ===================================
# Blockchain Providers
# ===================================
# At least one RPC provider is required for blockchain monitoring
# Get API key from: https://dashboard.alchemy.com/
ALCHEMY_API_KEY="your-alchemy-key"

# Get Project ID from: https://infura.io/dashboard
INFURA_PROJECT_ID="your-infura-project-id"

# Alternative: QuickNode (https://www.quicknode.com/)
# Full endpoint URL including network
QUICKNODE_ENDPOINT=""

# ===================================
# Frontend Configuration
# ===================================
FRONTEND_URL="http://localhost:3101"
NEXT_PUBLIC_API_URL="http://localhost:5001"

# ===================================
# Email (Optional - SendGrid)
# ===================================
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=""
SENDGRID_FROM_EMAIL=""

# ===================================
# Monitoring (Optional - Datadog)
# ===================================
# Get API key from: https://app.datadoghq.com/organization-settings/api-keys
DD_API_KEY=""
DD_SERVICE_NAME="stablecoin-gateway-api"

# ===================================
# AWS (For Production Deployment)
# ===================================
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
AWS_REGION="us-east-1"

# ===================================
# CORS Configuration
# ===================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS="http://localhost:3101"

# ===================================
# Webhook Secret Encryption
# ===================================
# [REQUIRED in production] Generate with: openssl rand -hex 32
# Must be exactly 64 hex characters (32 bytes for AES-256)
# If not set, webhook secrets are stored in plaintext (dev only)
WEBHOOK_ENCRYPTION_KEY=""

# ===================================
# KMS Configuration (Production)
# ===================================
# Use AWS KMS for secure key management in production
# Set USE_KMS=true to enable KMS-based key management
USE_KMS=false
# Format: ARN, Key ID (UUID), or alias/key-name
# Example: arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012
KMS_KEY_ID=""
# Alternative name (either KMS_KEY_ID or AWS_KMS_KEY_ID works)
AWS_KMS_KEY_ID=""

# ===================================
# Hot Wallet (Development Only)
# ===================================
# WARNING: Never commit private keys to version control!
# For production, use KMS_KEY_ID instead
# Only use this in development with ALLOW_PRIVATE_KEY_FALLBACK=true
HOT_WALLET_PRIVATE_KEY=""
ALLOW_PRIVATE_KEY_FALLBACK="false"
