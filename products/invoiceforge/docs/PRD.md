# InvoiceForge - Product Requirements Document

**Version**: 1.0
**Status**: Draft
**Last Updated**: 2026-02-01
**Product Manager**: Claude Product Manager

---

## 1. Executive Summary

### 1.1 Vision

InvoiceForge is a single-feature SaaS product where users describe their work in plain English and get a professional, formatted invoice or proposal generated by AI. Freelancers and consultants stop wrestling with spreadsheets and invoice templates -- they type what they did, and InvoiceForge produces a complete, branded invoice with proper line items, tax calculations, totals, and a payment link.

### 1.2 Problem Statement

Freelancers and small agencies lose hours every month creating invoices manually. They copy-paste client details, calculate line items, apply tax rates, format PDFs, and chase payment links. Existing tools like FreshBooks or QuickBooks are powerful but bloated -- they require setup, training, and ongoing maintenance that solo operators don't have time for.

**Core Problems We Solve**:
- **Invoice creation friction**: Freelancers spend 2-5 hours/month on invoicing instead of billable work
- **Formatting inconsistency**: Hand-built invoices look unprofessional and vary between clients
- **Mental overhead**: Translating "what I did" into structured line items requires context-switching
- **Payment collection delay**: Invoices without embedded payment links get paid 2-3x slower
- **Tool fatigue**: Full accounting suites are overkill for freelancers who just need to get paid

**The Opportunity**: The freelancer economy is massive (60M+ in the US alone). Tools like Bookipi have proven $1M+ ARR serving this market. But no one has built an AI-native invoice tool where the input is natural language and the output is a ready-to-send invoice with a payment link. That is the gap InvoiceForge fills.

### 1.3 Target Market

**Primary**: Solo freelancers and independent consultants
- Web developers, designers, copywriters
- Marketing consultants, SEO specialists
- Photographers, videographers
- Business consultants, coaches
- Any service provider billing by hour or project

**Secondary**: Small agencies (2-10 people) with lightweight invoicing needs

**Initial Launch Market**: US-based, English-only, USD-only

### 1.4 Success Metrics

**Business KPIs**:
- **Users Registered**: 500 in first 3 months
- **Invoices Generated**: 2,000+ in first quarter
- **Paid Conversions**: 5% free-to-paid conversion rate within 60 days
- **MRR**: $2,000 MRR by month 3 (220+ paid users)
- **Churn**: <8% monthly churn on paid plans

**Product KPIs**:
- **Time to First Invoice**: <3 minutes from signup
- **AI Accuracy**: 90%+ of generated invoices require no manual edits
- **Invoice Completion Rate**: 80%+ of started invoices are sent or downloaded
- **Payment Link Click-through**: 60%+ of invoices with payment links get clicked

**User Experience KPIs**:
- **NPS**: >50
- **User Satisfaction**: >4.5/5 on invoice quality
- **Support Ticket Volume**: <3% of active users per month

---

## 2. User Personas

### Persona 1: Maya - Freelance Web Developer

**Demographics**:
- Age: 29
- Role: Independent frontend developer
- Clients: 3-5 active at any time
- Annual Revenue: $110k
- Technical Skill: High
- Invoicing Today: Google Docs template, manual Stripe links

**Goals**:
- Spend zero time on invoice formatting
- Send professional invoices that match her personal brand
- Include Stripe payment links so clients pay instantly
- Track which invoices are paid vs. outstanding

**Pain Points**:
- Copies the same Google Doc template every time, manually swaps client names
- Forgets to update line items and sends invoices with last client's hours
- Clients say her invoices "look fine" but she knows they could look more polished
- Spends 20 minutes per invoice; bills 8-10 per month = 3+ hours lost

**Usage Context**:
- Creates invoices on laptop, usually Friday afternoons
- Wants to type something like "Built landing page and contact form for Acme Corp, 40 hours at $125/hr, plus $200 for domain setup"
- Expects a clean PDF she can email or share via link

**What Maya Says**:
_"I just want to type what I did and get a real invoice. I don't need accounting software -- I need to get paid."_

---

### Persona 2: Daniel - Management Consultant

**Demographics**:
- Age: 42
- Role: Independent strategy consultant
- Clients: 2-3 retainer clients + occasional project work
- Annual Revenue: $280k
- Technical Skill: Medium (comfortable with SaaS tools, not a developer)
- Invoicing Today: Word document + manual bank transfer requests

**Goals**:
- Send invoices that reflect the premium nature of his services
- Include detailed scope descriptions that justify his rates
- Generate proposals that convert into signed engagements
- Maintain a history of all invoices per client for tax time

**Pain Points**:
- Each invoice takes 30-45 minutes because he writes detailed scope descriptions
- Formatting in Word is tedious -- tables break, fonts change, margins shift
- Has no payment link; relies on clients to initiate bank transfers (slow)
- At tax time, scrambles to find all invoices across email and Google Drive

**Usage Context**:
- Invoices monthly, usually 3-4 invoices
- Wants to dictate scope in conversational English: "Phase 1 market analysis for TechCorp's Q2 strategy engagement, 60 hours at $350/hr. Phase 2 competitive landscape report, fixed fee $8,000. Travel expenses: 2 flights LAX-SFO at $450 each."
- Needs PDF export and the ability to add his logo

**What Daniel Says**:
_"My invoices are as important as my deliverables. They need to look sharp and be easy to create. Right now it takes me longer to invoice than it should."_

---

### Persona 3: Priya - Small Agency Owner

**Demographics**:
- Age: 36
- Role: Founder of a 5-person digital marketing agency
- Clients: 10-15 active accounts
- Annual Revenue: $750k
- Technical Skill: Medium
- Invoicing Today: FreshBooks (finds it bloated)

**Goals**:
- Generate invoices faster -- her team creates 30-40 per month
- Standardize invoice format across all team members
- Include payment links in every invoice
- Eventually have team members create invoices under the agency brand

**Pain Points**:
- FreshBooks is $50/month and 80% of features go unused
- Each team member formats invoices differently
- Onboarding new team members to FreshBooks takes a full day
- Wants something her team can use in 5 minutes with no training

**Usage Context**:
- Team creates invoices throughout the month
- Wants to paste project notes and get a formatted invoice: "Social media management for BlueWave -- January 2026. 40 posts created, 8 ad campaigns, monthly analytics report. Retainer: $4,500. Ad spend pass-through: $2,100."
- Needs client management so addresses auto-populate
- Will upgrade to team plan when available

**What Priya Says**:
_"I don't need accounting software. I need my team to type what they did and get an invoice I'm not embarrassed to send to clients."_

---

## 3. Features

### 3.1 MVP Features (Must Have)

| ID | Feature | User Story | Priority | Phase |
|----|---------|------------|----------|-------|
| F-001 | User Authentication | As a user, I want to sign up and log in so my invoices are saved to my account | P0 | MVP |
| F-002 | AI Invoice Generation | As a user, I want to describe my work in plain English and get a formatted invoice with correct line items, totals, and tax | P0 | MVP |
| F-003 | Invoice Preview & Editing | As a user, I want to preview the generated invoice and make manual edits before finalizing | P0 | MVP |
| F-004 | PDF Export & Download | As a user, I want to download my invoice as a professional PDF | P0 | MVP |
| F-005 | Client Management | As a user, I want to save client details (name, email, address) so they auto-populate on future invoices | P0 | MVP |
| F-006 | Stripe Payment Link | As a user, I want to attach a Stripe payment link to my invoice so clients can pay online | P0 | MVP |
| F-007 | Invoice Dashboard | As a user, I want to see all my invoices in one place, filter by status, and track what's paid vs. outstanding | P0 | MVP |

### 3.2 Phase 2 Features (Should Have)

| ID | Feature | User Story | Priority | Phase |
|----|---------|------------|----------|-------|
| F-008 | Recurring Invoices | As a user, I want to set up invoices that auto-generate monthly for retainer clients | P1 | Phase 2 |
| F-009 | Multi-Currency | As a user, I want to create invoices in GBP, EUR, or other currencies for international clients | P1 | Phase 2 |
| F-010 | Team Features | As an agency owner, I want team members to create invoices under my brand | P1 | Phase 2 |
| F-011 | Branding & Templates | As a user, I want to upload my logo and customize invoice colors/fonts | P1 | Phase 2 |
| F-012 | Proposal Generation | As a consultant, I want to generate proposals from natural language that I can convert to invoices when signed | P1 | Phase 2 |

### 3.3 Future Considerations (Nice to Have)

- QuickBooks / Xero integration (push invoices to accounting software)
- Expense tracking and receipt capture
- Tax jurisdiction auto-detection
- Email delivery with open/view tracking
- Client portal (clients log in to see all invoices)
- Mobile app (iOS/Android)
- AI-powered payment reminders
- Multi-language invoice generation
- Bulk invoice generation from CSV/spreadsheet

---

## 4. Site Map

| Route | Status | Description |
|-------|--------|-------------|
| / | MVP | Landing page (marketing, value prop, CTA to sign up) |
| /signup | MVP | User registration (email/password + Google OAuth) |
| /login | MVP | User login |
| /forgot-password | MVP | Password reset request |
| /reset-password | MVP | Password reset with token |
| /dashboard | MVP | Main dashboard (invoice list, stats summary) |
| /dashboard/invoices | MVP | Full invoice list with filters and search |
| /dashboard/invoices/new | MVP | AI invoice creation page (natural language input) |
| /dashboard/invoices/:id | MVP | Invoice detail view (preview, edit, actions) |
| /dashboard/invoices/:id/edit | MVP | Invoice editor (manual field editing) |
| /dashboard/clients | MVP | Client list |
| /dashboard/clients/new | MVP | Add new client form |
| /dashboard/clients/:id | MVP | Client detail (info + invoice history for this client) |
| /dashboard/settings | MVP | Account settings (profile, password, Stripe connection) |
| /dashboard/settings/billing | MVP | Subscription plan management |
| /invoice/:id/view | MVP | Public invoice view (shareable link for clients) |
| /invoice/:id/pay | MVP | Payment page (Stripe checkout for client) |
| /pricing | MVP | Pricing page (Free, Pro, Team tiers) |
| /dashboard/invoices/recurring | Phase 2 | Recurring invoice management |
| /dashboard/team | Phase 2 | Team member management |
| /dashboard/settings/branding | Phase 2 | Logo upload, color/font customization |

---

## 5. User Flows

### 5.1 Create Invoice Flow (Core Loop)

```
User logs in
  -> Dashboard shows invoice list + "Create Invoice" CTA
  -> Clicks "Create Invoice"
  -> /dashboard/invoices/new loads with AI input area
  -> User types natural language description:
     "Built React dashboard for Acme Corp, 120 hours at $150/hr.
      Hosting setup as separate line item, $500 flat.
      Apply 8.5% sales tax."
  -> Clicks "Generate Invoice"
  -> AI processes input (1-3 seconds)
  -> Invoice preview renders with:
     - Client: Acme Corp (auto-matched or new)
     - Line items:
       1. React dashboard development - 120 hrs x $150.00 = $18,000.00
       2. Hosting setup - flat fee = $500.00
     - Subtotal: $18,500.00
     - Tax (8.5%): $1,572.50
     - Total: $20,072.50
     - Invoice number: INV-0001 (auto-generated)
     - Date: Today
     - Due date: Net 30 (default)
  -> User reviews, optionally edits any field
  -> Clicks "Finalize"
  -> Invoice saved with status "Draft"
  -> User can: Download PDF, Copy shareable link, Send via email (future)
```

**Time to Complete**: <3 minutes (including typing description)

---

### 5.2 View & Manage Invoices Flow

```
User navigates to /dashboard
  -> Sees summary cards: Total Outstanding, Total Paid (this month), Invoices Sent
  -> Sees invoice table with columns: Invoice #, Client, Amount, Status, Date, Due Date
  -> Can filter by status: All, Draft, Sent, Paid, Overdue
  -> Can search by client name or invoice number
  -> Clicks an invoice row
  -> /dashboard/invoices/:id loads
  -> Detail view shows full invoice preview
  -> Action buttons: Edit, Download PDF, Copy Link, Mark as Paid, Delete
```

---

### 5.3 Client Management Flow

```
User navigates to /dashboard/clients
  -> Sees list of saved clients
  -> Clicks "Add Client"
  -> Enters: Company name, Contact name, Email, Address (optional)
  -> Saves client
  -> Client is now available for auto-matching during invoice creation
  -> When user types "Acme Corp" in invoice description, AI matches to saved client
  -> Client detail page shows all invoices for that client
```

---

### 5.4 Payment Flow (Client Perspective)

```
Client receives invoice link (email, message, etc.)
  -> Clicks link to /invoice/:id/view
  -> Sees professional invoice view (read-only)
  -> Sees "Pay Now" button (if Stripe payment link attached)
  -> Clicks "Pay Now"
  -> Redirected to Stripe Checkout
  -> Completes payment
  -> Redirected back to invoice page showing "Paid" status
  -> Invoice creator is notified (in-app + email)
  -> Invoice status auto-updates to "Paid"
```

**Time to Complete**: <2 minutes for client

---

### 5.5 Signup and Onboarding Flow

```
New user visits /
  -> Sees landing page with value prop and demo
  -> Clicks "Get Started Free"
  -> /signup loads
  -> Option A: Email + password registration
  -> Option B: "Continue with Google" (OAuth)
  -> After signup, redirected to /dashboard/invoices/new
  -> Onboarding tooltip: "Describe your work and we'll create your first invoice"
  -> User creates first invoice (guided)
  -> After first invoice: "You have 4 free invoices remaining this month"
```

---

## 6. Requirements

### 6.1 Functional Requirements

**Authentication & Accounts**:
- FR-001: Users can sign up with email and password
- FR-002: Users can sign up and log in with Google OAuth
- FR-003: Users can reset their password via email link
- FR-004: Passwords require minimum 8 characters, 1 uppercase letter, 1 number
- FR-005: Sessions expire after 7 days of inactivity
- FR-006: Users can update their profile (name, email, business name)

**AI Invoice Generation**:
- FR-007: Users can enter a free-text description of their work (up to 2,000 characters)
- FR-008: AI extracts and structures: client name, line items (description, quantity, unit type, rate, amount), tax rate, and due date from the text
- FR-009: AI assigns appropriate unit types: hours, days, items, flat fee, percentage
- FR-010: AI calculates line item totals, subtotal, tax amount, and grand total
- FR-011: AI auto-generates an invoice number in sequence (INV-0001, INV-0002, etc.)
- FR-012: AI sets invoice date to today and due date to Net 30 (default) unless user specifies otherwise
- FR-013: If a client name in the description matches a saved client, the system auto-populates client details
- FR-014: If the AI cannot parse the input, it returns a clear error explaining what is missing

**Invoice Preview & Editing**:
- FR-015: After generation, the invoice is displayed in a formatted preview matching PDF output
- FR-016: All fields are editable: client info, line items, tax rate, dates, notes
- FR-017: Users can add, remove, or reorder line items manually
- FR-018: Totals recalculate in real-time when any amount or tax field changes
- FR-019: Users can add a freeform "Notes" section to the invoice (e.g., payment terms, thank-you message)
- FR-020: Users can select a due date from a dropdown: Net 15, Net 30, Net 45, Net 60, or custom date

**PDF Export**:
- FR-021: Users can download the invoice as a PDF
- FR-022: PDF includes: invoice number, date, due date, from/to addresses, line items table, subtotal, tax, total, notes, and payment link (if attached)
- FR-023: PDF uses a clean, professional layout (single page for typical invoices)
- FR-024: PDF file is named `INV-{number}-{client-name}.pdf`

**Client Management**:
- FR-025: Users can create, view, edit, and delete clients
- FR-026: Client record includes: company name, contact name, email address, billing address (street, city, state, zip, country)
- FR-027: Client list is searchable by company name or contact name
- FR-028: Client detail page shows all invoices for that client with status

**Payment Links (Stripe)**:
- FR-029: Users can connect their Stripe account via OAuth (Stripe Connect)
- FR-030: When creating/editing an invoice, users can attach a Stripe payment link
- FR-031: The payment link is embedded in the invoice PDF and the shareable web view
- FR-032: When a client pays via the link, the invoice status updates to "Paid" automatically via Stripe webhook
- FR-033: Users without Stripe connected can still create invoices (payment link is optional)

**Invoice Dashboard**:
- FR-034: Dashboard displays a list of all invoices with columns: Invoice #, Client, Amount, Status, Date, Due Date
- FR-035: Users can filter invoices by status: All, Draft, Sent, Paid, Overdue
- FR-036: Users can search invoices by client name or invoice number
- FR-037: Dashboard shows summary cards: Total Outstanding, Total Paid (this month), Invoices Created (this month)
- FR-038: Invoices past their due date with status "Sent" are automatically marked as "Overdue"
- FR-039: Users can delete draft invoices; sent/paid invoices cannot be deleted (only archived)

**Invoice Status Workflow**:
- FR-040: Invoice statuses follow this workflow: Draft -> Sent -> Paid (or Overdue)
- FR-041: "Sent" status is set when the user copies the shareable link or downloads the PDF
- FR-042: "Paid" status is set automatically via Stripe webhook or manually by the user ("Mark as Paid")
- FR-043: "Overdue" status is set automatically when a "Sent" invoice passes its due date

**Subscription & Billing**:
- FR-044: Free tier: 5 invoices per calendar month, all core features
- FR-045: Pro tier ($9/month): Unlimited invoices, all core features
- FR-046: Team tier ($29/month): Unlimited invoices, team features (Phase 2)
- FR-047: Subscription managed via Stripe Billing
- FR-048: Users see a clear count of remaining free invoices in the dashboard
- FR-049: When free limit is reached, user is prompted to upgrade with a non-blocking modal

### 6.2 Non-Functional Requirements

**Performance**:
- NFR-001: AI invoice generation completes in <5 seconds (p95)
- NFR-002: Dashboard loads in <2 seconds (LCP) for up to 1,000 invoices
- NFR-003: PDF generation completes in <3 seconds
- NFR-004: API response time <200ms (p95) for non-AI endpoints
- NFR-005: Invoice preview renders in <500ms after AI response

**Security**:
- NFR-006: All communication over HTTPS with TLS 1.3
- NFR-007: Passwords hashed with bcrypt (cost factor 12)
- NFR-008: JWT tokens with 1-hour expiry, refresh tokens with 7-day expiry
- NFR-009: Rate limiting: 60 requests/minute per user for AI generation, 200/minute for other endpoints
- NFR-010: CSRF protection on all state-changing endpoints
- NFR-011: Input sanitization on all user-provided text (prevent XSS in invoice content)
- NFR-012: Stripe API keys stored encrypted at rest
- NFR-013: No sensitive financial data (credit card numbers) stored in our database; all payments handled by Stripe

**Reliability**:
- NFR-014: API uptime SLA of 99.9%
- NFR-015: Database backups daily with 30-day retention
- NFR-016: AI service degradation handled gracefully (show manual invoice form if AI is unavailable)
- NFR-017: Stripe webhook processing is idempotent (duplicate events do not double-update)

**Scalability**:
- NFR-018: System supports 10,000 concurrent users
- NFR-019: Database design supports 1M+ invoices
- NFR-020: AI generation endpoint horizontally scalable (stateless)

**Accessibility**:
- NFR-021: Web application meets WCAG 2.1 Level AA
- NFR-022: Dashboard supports keyboard navigation
- NFR-023: Color contrast ratio >= 4.5:1 for all text
- NFR-024: Screen reader compatible (ARIA labels on all interactive elements)

**Data & Privacy**:
- NFR-025: GDPR-compliant data handling (consent, right to deletion)
- NFR-026: Users can export all their data (invoices, clients) as JSON or CSV
- NFR-027: User data deleted within 30 days of account deletion request
- NFR-028: Invoice data retained for 7 years for tax compliance (unless user requests deletion)

---

## 7. Acceptance Criteria

### F-001: User Authentication

**Signup with Email**:
Given a new visitor on /signup
When they enter a valid email, password (8+ chars, 1 uppercase, 1 number), and business name
Then an account is created and they are redirected to /dashboard/invoices/new
And a welcome email is sent

**Signup with Google**:
Given a new visitor on /signup
When they click "Continue with Google" and authorize
Then an account is created using their Google profile
And they are redirected to /dashboard/invoices/new

**Login**:
Given a registered user on /login
When they enter valid credentials
Then they are redirected to /dashboard
And a session is created (JWT + refresh token)

**Password Reset**:
Given a user who forgot their password
When they enter their email on /forgot-password
Then a reset link is emailed (valid for 1 hour)
And clicking the link allows them to set a new password

---

### F-002: AI Invoice Generation

**Standard Hourly Invoice**:
Given a logged-in user on /dashboard/invoices/new
When they type "Web development for Acme Corp, 40 hours at $125/hr"
And click "Generate Invoice"
Then an invoice preview is shown with:
- Client: Acme Corp
- Line item: Web development - 40 hrs x $125.00 = $5,000.00
- Total: $5,000.00

**Multi-line with Tax**:
Given a logged-in user
When they type "Built React dashboard for TechCo, 120 hours at $150/hr. Hosting setup, $500 flat. Apply 8.5% tax."
Then an invoice preview shows:
- Line 1: React dashboard development - 120 hrs x $150.00 = $18,000.00
- Line 2: Hosting setup - 1 x $500.00 = $500.00
- Subtotal: $18,500.00
- Tax (8.5%): $1,572.50
- Total: $20,072.50

**Client Auto-Match**:
Given a user with "Acme Corp" saved as a client
When they type "Logo redesign for Acme Corp, $2,500 flat fee"
Then the generated invoice auto-populates Acme Corp's saved address and contact info

**Ambiguous Input Handling**:
Given a user types "Did some work for a client last week"
When they click "Generate Invoice"
Then the system displays an error: "We need more detail. Please include the client name and at least one billable item with an amount."

---

### F-003: Invoice Preview & Editing

**Preview Accuracy**:
Given a generated invoice
Then the preview matches the PDF output layout pixel-for-pixel
And all line items, totals, and tax are correctly displayed

**Inline Editing**:
Given a user viewing an invoice preview
When they click on any field (client name, line item description, amount, tax rate)
Then the field becomes editable inline
And totals recalculate automatically when amounts change

**Add/Remove Line Items**:
Given a user editing an invoice
When they click "Add Line Item"
Then a new empty row appears in the line items table
When they click the delete icon on a line item
Then that row is removed and totals recalculate

---

### F-004: PDF Export & Download

**PDF Quality**:
Given a finalized invoice
When the user clicks "Download PDF"
Then a PDF file downloads with filename `INV-{number}-{client-name}.pdf`
And the PDF contains all invoice fields in a professional layout
And the PDF is a single page for invoices with up to 10 line items

**Payment Link in PDF**:
Given an invoice with a Stripe payment link attached
When the PDF is generated
Then the payment link is included as a clickable URL at the bottom of the invoice

---

### F-005: Client Management

**Create Client**:
Given a user on /dashboard/clients/new
When they fill in company name (required), contact name, email, and address
And click "Save"
Then the client is saved and appears in the client list

**Client Invoice History**:
Given a user on /dashboard/clients/:id
Then they see the client's details and a list of all invoices for that client
And each invoice row shows: Invoice #, Amount, Status, Date

---

### F-006: Stripe Payment Link

**Connect Stripe**:
Given a user on /dashboard/settings
When they click "Connect Stripe"
Then they are redirected to Stripe Connect OAuth flow
And after authorization, their Stripe account is linked

**Attach Payment Link**:
Given a user with Stripe connected, editing an invoice
When they toggle "Include Payment Link"
Then a Stripe payment link is generated for the invoice total
And the link is shown on the invoice preview and included in the PDF

**Auto-Update on Payment**:
Given a client pays via the Stripe link
When Stripe sends a checkout.session.completed webhook
Then the invoice status updates to "Paid"
And the user sees the status change on their dashboard

---

### F-007: Invoice Dashboard

**Dashboard View**:
Given a user with 50 invoices
When they navigate to /dashboard
Then they see summary cards (Outstanding, Paid this month, Created this month)
And a table of invoices sorted by date (newest first)
And pagination if more than 25 invoices

**Filter and Search**:
Given a user on the dashboard
When they select "Overdue" from the status filter
Then only overdue invoices are displayed
When they type "Acme" in the search box
Then only invoices for Acme Corp are displayed

**Overdue Detection**:
Given an invoice with status "Sent" and due date of 2026-01-15
When today is 2026-01-16
Then the invoice status displays as "Overdue" with a red badge

---

## 8. Out of Scope

**Explicitly NOT included in MVP**:
- Recurring / scheduled invoices (Phase 2)
- Multi-currency support (Phase 2)
- Team accounts and multi-user access (Phase 2)
- Custom branding (logo, colors, fonts) (Phase 2)
- Proposal generation (Phase 2)
- QuickBooks, Xero, or other accounting integrations
- Automatic tax jurisdiction lookup (user specifies tax rate manually)
- Email delivery of invoices (user copies link or downloads PDF)
- Expense tracking or receipt capture
- Mobile app (iOS/Android)
- Inventory or product management
- Time tracking
- Multi-language invoice generation
- Analytics or reporting beyond dashboard summary cards
- Estimates or quotes (separate from invoices)
- Credit notes or partial refunds

---

## 9. Dependencies

**External Services**:
- **AI Provider**: OpenAI GPT-4 or Anthropic Claude for natural language to structured invoice parsing
- **Payment Processing**: Stripe (Connect for merchant onboarding, Checkout for payment links, Billing for subscriptions)
- **Email Service**: SendGrid or AWS SES for transactional emails (welcome, password reset, payment notifications)
- **Authentication**: Custom JWT implementation + Google OAuth (passport.js or similar)
- **PDF Generation**: Server-side PDF library (puppeteer, pdf-lib, or react-pdf)

**Infrastructure**:
- **Database**: PostgreSQL 15+ (database: invoiceforge_dev)
- **Backend**: Fastify (port 5004)
- **Frontend**: Next.js 14 (port 3109)
- **ORM**: Prisma
- **Hosting**: To be determined (likely Vercel + Render or Railway)

---

## 10. Risks and Mitigations

| Risk | Impact | Likelihood | Mitigation |
|------|--------|------------|------------|
| AI generates incorrect line items or totals | High - user trust destroyed | Medium | Always show editable preview; never auto-send. Invest in prompt engineering and test with 100+ real-world inputs. |
| AI latency too high (>10s) | Medium - poor UX | Low | Use streaming response to show progress. Cache common patterns. Fallback to manual form. |
| Stripe Connect onboarding friction | Medium - users skip payment links | Medium | Make payment links optional. Provide clear setup guide. |
| Low free-to-paid conversion | High - revenue misses target | Medium | Ensure free tier is generous enough to hook users (5/month). Use in-app nudges at limit. |
| Competitor launches similar AI feature | Medium - market share loss | Medium | Move fast. First-mover advantage + tight single-feature focus. |
| User inputs malicious content in invoice description | Low - security incident | Low | Sanitize all inputs. AI prompt includes safety instructions. Invoice rendering escapes HTML. |
| PDF rendering inconsistencies across browsers | Low - cosmetic issues | Medium | Generate PDFs server-side (not client-side). Use headless browser for pixel-perfect output. |

---

## 11. Monetization Details

### Pricing Tiers

| Tier | Price | Invoices/Month | Features |
|------|-------|----------------|----------|
| Free | $0 | 5 | AI generation, PDF export, client management, payment links |
| Pro | $9/month | Unlimited | All Free features, priority AI processing, remove InvoiceForge branding from PDFs |
| Team | $29/month | Unlimited | All Pro features + team members, shared client list, agency branding (Phase 2) |

### Revenue Model

- Primary revenue: Monthly subscriptions (Pro and Team tiers)
- No transaction fees on payments (Stripe charges their own fees directly to the user's Stripe account)
- No setup fees, no annual commitment required
- Annual billing option at 20% discount: Pro $86/year, Team $278/year

### Free Tier Economics

- 5 invoices/month is enough to evaluate the product but not enough for active freelancers
- Cost per free user: ~$0.05/month (AI API costs for 5 invoice generations)
- Target: 10:1 free-to-paid ratio sustains unit economics

---

## 12. Timeline

**MVP Development** (4 weeks):
- Week 1: Backend foundation (auth, database schema, API structure) + AI invoice generation endpoint
- Week 2: Frontend foundation (Next.js app, dashboard layout, invoice creation page) + AI integration
- Week 3: Invoice preview/editing, PDF export, client management, Stripe Connect
- Week 4: Payment links, dashboard features, subscription billing, testing, polish

**MVP Launch** (Week 5):
- Deploy to production
- Onboard first 20 beta users (from freelancer communities)
- Collect feedback and iterate

**Phase 2** (Weeks 6-10):
- Recurring invoices
- Multi-currency
- Custom branding / templates
- Team features

**Milestones**:
- **Week 2**: AI generates accurate invoices from natural language, end-to-end
- **Week 3**: Full invoice lifecycle works (create, preview, edit, download PDF)
- **Week 4**: Payment flow works (Stripe Connect + payment links + webhooks)
- **Week 5**: MVP launched with 20 beta users

---

## 13. Open Questions

**For Architect**:
- [ ] Which AI provider to use (OpenAI vs. Anthropic) and how to structure the prompt for reliable structured output?
- [ ] Server-side PDF generation approach (puppeteer vs. pdf-lib vs. react-pdf)?
- [ ] How to handle Stripe Connect Express vs. Standard accounts?

**For CEO**:
- [ ] Should the free tier show InvoiceForge branding on PDFs (like "Created with InvoiceForge")?
- [ ] Do we want to support proposal generation in MVP or strictly Phase 2?
- [ ] Should we offer a 14-day free trial of Pro features for new users?

**For Legal**:
- [ ] What disclaimers are needed for AI-generated financial documents?
- [ ] Are there regulations around automated invoice generation we need to comply with?
- [ ] What terms of service are needed for the Stripe Connect integration?

---

## 14. Glossary

- **Invoice**: A document sent by a seller to a buyer requesting payment for goods or services
- **Line Item**: A single entry on an invoice (e.g., "Web development - 40 hrs x $125/hr")
- **Net 30**: Payment terms meaning the invoice is due 30 days after the invoice date
- **Stripe Connect**: Stripe's platform for marketplace payments; allows users to connect their Stripe account
- **Stripe Checkout**: Stripe's hosted payment page; handles credit card collection securely
- **Payment Link**: A URL that directs to a Stripe Checkout session for a specific invoice amount
- **NLU**: Natural Language Understanding; the AI capability that parses freeform text into structured data
- **PDF Export**: Server-side generation of a downloadable PDF version of the invoice
- **Freemium**: Business model where basic features are free, with paid upgrades for more usage or features
- **Webhook**: An HTTP callback; Stripe sends webhooks to notify our server when payments complete

---

**End of Document**
