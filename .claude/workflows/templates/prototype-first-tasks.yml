# Prototype-First Workflow Task Graph Template
# Purpose: Rapid concept validation before full product development
# Use when: Testing an idea, quick MVP, proof-of-concept
# Placeholders: {PRODUCT}, {CONCEPT}

# ─────────────────────────────────────────────────────────────────
# PROTOCOL ENFORCEMENT (ConnectSW Constitution Articles XI & XII)
# ─────────────────────────────────────────────────────────────────
# ALL AGENTS must follow BEFORE starting any task:
#   - Read .claude/protocols/anti-rationalization.md (Article XI)
#   - Apply the 1% Rule: if a quality step might apply, invoke it
#
# ALL AGENTS must follow BEFORE marking any task done:
#   - Verification-Before-Completion 5-Step Gate (Article XI):
#     1. Identify what "done" looks like (specific, testable)
#     2. Execute the actual verification command
#     3. Read the actual output (do NOT assume success)
#     4. Compare output to acceptance criteria literally
#     5. Claim done only when evidence matches
#
# FOR DELIVERABLES (Article XII):
#   - Write all outputs to files (direct-delivery.md)
#   - Compress context if >60% full (context-compression.md)
# ─────────────────────────────────────────────────────────────────

# INNOVATION PROTOCOL: After any prototype or experimental feature reaches MVP:
#   - Run .claude/protocols/repository-back-translation.md
#   - Back-translate the development trajectory to create agent learning exemplars
#   - File exemplars in .claude/knowledge/exemplars/

metadata:
  product: "{PRODUCT}"
  version: "1.0.0"
  workflow_type: "prototype-first"
  created_at: "{TIMESTAMP}"
  updated_at: "{TIMESTAMP}"
  description: "Rapid prototype workflow for concept validation"

tasks:
  # ============================================================================
  # PHASE 1: QUICK CONCEPT (NOT FULL PRD)
  # ============================================================================

  - id: "CONCEPT-01"
    name: "Define Prototype Concept"
    description: |
      Create lightweight concept document for: {CONCEPT}

      Focus on:
      - Core problem being solved
      - Target user (1 persona only)
      - Key features for prototype (3-5 max)
      - Success criteria for prototype
      - What we're testing/validating
      - Time budget (recommend 2-4 hours max)

      DO NOT create full PRD - just enough to build a testable prototype.

      Output: Simple 1-2 page concept doc in products/{PRODUCT}/docs/CONCEPT.md
    agent: "product-manager"
    depends_on: []
    produces:
      - name: "Concept Document"
        type: "document"
        path: "products/{PRODUCT}/docs/CONCEPT.md"
      - name: "Prototype Addendum"
        type: "document"
        path: "products/{PRODUCT}/.claude/addendum.md"
    parallel_ok: false
    checkpoint: true
    priority: "high"
    estimated_time_minutes: 30
    acceptance_criteria:
      - "Core problem clearly stated"
      - "3-5 key features identified"
      - "Success criteria defined"
      - "Prototype scope is minimal (can build in 2-4 hours)"
    status: "pending"

  # ============================================================================
  # PHASE 2: QUICK TECH DECISIONS (NOT FULL ARCHITECTURE)
  # ============================================================================

  - id: "TECH-01"
    name: "Quick Tech Stack Selection"
    description: |
      Make rapid tech stack decisions for prototype.

      Focus on:
      - Choose fastest path to working prototype
      - Prefer: Vite + React for frontend, no backend unless required
      - Document in 1 ADR only (tech stack choice)
      - No detailed architecture - just "how we'll build this fast"

      Output: Single ADR + update addendum with tech choices
    agent: "architect"
    depends_on: ["CONCEPT-01"]
    consumes:
      - name: "Concept Document"
        required_from_task: "CONCEPT-01"
    produces:
      - name: "Tech Decision ADR"
        type: "file"
        path: "products/{PRODUCT}/docs/ADRs/ADR-001-prototype-tech.md"
    parallel_ok: false
    checkpoint: false
    priority: "high"
    estimated_time_minutes: 20
    acceptance_criteria:
      - "Tech stack chosen (optimize for speed)"
      - "One ADR documenting decision"
      - "Addendum updated with minimal tech details"
    status: "pending"

  # ============================================================================
  # PHASE 3: BUILD PROTOTYPE (FAST!)
  # ============================================================================

  - id: "PROTO-01"
    name: "Build Working Prototype"
    description: |
      Build minimal working prototype with 3-5 key features only.

      Guidelines:
      - Hardcode data (no database)
      - Skip authentication
      - Minimal styling (Tailwind utility classes only)
      - Focus on core functionality only
      - Write minimal tests (happy path only, ~10 tests max)
      - Use placeholder text/images
      - Don't worry about edge cases
      - Goal: Something CEO can click through and test

      Time budget: 90-120 minutes MAX

      Output: Working prototype that demonstrates the concept
    agent: "frontend-engineer"
    depends_on: ["TECH-01"]
    consumes:
      - name: "Concept Document"
        required_from_task: "CONCEPT-01"
      - name: "Tech Decision"
        required_from_task: "TECH-01"
    produces:
      - name: "Prototype App"
        type: "directory"
        path: "products/{PRODUCT}/apps/web"
      - name: "Basic Tests"
        type: "directory"
        path: "products/{PRODUCT}/apps/web/tests"
    parallel_ok: false
    checkpoint: false
    priority: "critical"
    estimated_time_minutes: 120
    acceptance_criteria:
      - "App runs on localhost"
      - "3-5 key features work (basic functionality)"
      - "At least 10 tests passing"
      - "Can click through and test concept"
      - "Built in under 2 hours"
    status: "pending"

  # ============================================================================
  # PHASE 4: QUICK VALIDATION
  # ============================================================================

  - id: "TEST-01"
    name: "Quick Smoke Test"
    description: |
      Run basic smoke tests on prototype.

      Check:
      - App loads without errors
      - Key features are clickable/functional
      - No console errors
      - Basic visual verification

      DO NOT run full testing gate - just verify it works.

      Time budget: 15 minutes MAX
    agent: "qa-engineer"
    depends_on: ["PROTO-01"]
    consumes:
      - name: "Prototype App"
        required_from_task: "PROTO-01"
    produces:
      - name: "Smoke Test Report"
        type: "document"
        path: "products/{PRODUCT}/docs/smoke-test.md"
    parallel_ok: false
    checkpoint: false
    priority: "high"
    estimated_time_minutes: 15
    acceptance_criteria:
      - "App loads successfully"
      - "Key features tested manually"
      - "No critical bugs found"
    status: "pending"

  # ============================================================================
  # CHECKPOINT: PROTOTYPE READY FOR CEO REVIEW
  # ============================================================================

  - id: "CHECKPOINT-PROTOTYPE"
    name: "Prototype Ready - CEO Decision Point"
    description: |
      Prototype is complete and ready for CEO to test.

      CEO can now:
      1. Test the prototype (click through, try features)
      2. Decide next steps:
         - Option A: "Approve for full development" → Convert to full product
         - Option B: "Iterate prototype" → Request changes, rebuild
         - Option C: "Abandon" → Concept didn't validate, move on

      This is a decision point, not just a review.
    agent: "orchestrator"
    depends_on: ["TEST-01"]
    parallel_ok: false
    checkpoint: true
    priority: "critical"
    estimated_time_minutes: 0
    acceptance_criteria:
      - "Prototype demonstrated to CEO"
      - "CEO makes decision on next steps"
    status: "pending"

# Execution estimates for prototype workflow:
# - Total time: ~3 hours (vs ~15 hours for full new-product)
# - Concept definition: 30 min
# - Tech decisions: 20 min
# - Build prototype: 90-120 min
# - Smoke test: 15 min
# - CEO decision: variable
#
# Benefits:
# - 5x faster than full workflow
# - Low commitment - can pivot or abandon easily
# - Validates concept before investing in full development
# - CEO sees working prototype before approving full product

# Workflow Comparison:
#
# PROTOTYPE-FIRST (this template):
# ├── Quick concept (30 min)
# ├── Tech choice (20 min)
# ├── Build prototype (2 hours)
# ├── Smoke test (15 min)
# └── CEO decision → Convert to full product OR iterate/abandon
#
# NEW-PRODUCT (existing template):
# ├── Full PRD (2 hours)
# ├── Full architecture (3 hours)
# ├── Complete foundation (6+ hours)
# ├── Full testing gate (1 hour)
# └── CEO review → Production ready
#
# Use prototype-first when:
# - Testing a new concept
# - Unsure if idea is worth full investment
# - Want to see it working before committing
# - Need quick validation
#
# Use new-product when:
# - Concept is validated
# - Ready for production-quality code
# - Need full documentation and testing
# - Building for real users
